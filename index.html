<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Equation Generator</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background-color: #f0f8ff;
      margin: 20px;
    }
    .equation {
      font-size: 24px;
      margin-top: 20px;
    }
    .generate-btn {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 20px;
    }
    .generate-btn:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <h1>Random Algebraic Equation Generator</h1>
  <div id="equation-container" class="equation">Loading...</div>
  <button class="generate-btn" onclick="renderEquation()">Generate New Equation</button>

  <script>
    function getRandomInteger(includeZero = true) {
      let value;
      do {
        value = Math.floor(Math.random() * 21) - 10;
      } while (!includeZero && value === 0);
      return value;
    }

    function gcd(a, b) {
      return b === 0 ? Math.abs(a) : gcd(b, a % b);
    }

    function getCoprimePair() {
      let numerator, denominator;
      do {
        numerator = getRandomInteger(false);
        denominator = getRandomInteger(false);
      } while (gcd(numerator, denominator) !== 1);

      if (denominator < 0) {
        numerator = -numerator;
        denominator = -denominator;
      }
      return [numerator, denominator];
    }

    function simplifyFraction(num, den) {
      if (num === 0) return [0, 1];
      const divisor = gcd(num, den);
      return [num / divisor, den / divisor];
    }

    function formatFraction(numerator, denominator, skipOne = true) {
      if (numerator === 0) return "0";
      let sign = numerator * denominator < 0 ? "-" : "";
      numerator = Math.abs(numerator);
      denominator = Math.abs(denominator);

      if (numerator === denominator) {
        return skipOne ? sign : `${sign}1`;
      }

      if (denominator === 1) {
        return `${sign}${numerator}`;
      }

      return `${sign}\\frac{${numerator}}{${denominator}}`;
    }

    function multiplyFractions(f1, f2) {
      const resultNum = f1[0] * f2[0];
      const resultDen = f1[1] * f2[1];
      return simplifyFraction(resultNum, resultDen);
    }

function generateEquation() {
  // Generate initial fractions
  const [a, b] = getCoprimePair();
  const [c, d] = [getRandomInteger(), getRandomInteger(false)];
  const [e, f] = [getRandomInteger(), getRandomInteger(false)];
  const [g, h] = getCoprimePair();
  let [i, j] = [getRandomInteger(), getRandomInteger(false)];
  const [k, l] = [getRandomInteger(), getRandomInteger(false)];

  // Ensure c/d â‰  i/j
  while (c * j === i * d) {
    [i, j] = [getRandomInteger(), getRandomInteger(false)];
  }

  // Process left side
  let leftExpression = "";
  if (c === 0 && e === 0) {
    leftExpression = "0";
  } else if (c === 0) {
    // Only fraction term e/f
    const [numE, denE] = multiplyFractions([a, b], [e, f]);
    leftExpression = formatFraction(numE, denE);
  } else if (e === 0) {
    // Only x term c/d
    const [numC, denC] = multiplyFractions([a, b], [c, d]);
    leftExpression = `${formatFraction(numC, denC)}x`;
  } else {
    const cTerm = `${formatFraction(c, d)}x`;
    const eTerm = e < 0 ? 
        (cTerm.startsWith('-') ? `+ ${formatFraction(Math.abs(e), f, false)}` : `- ${formatFraction(Math.abs(e), f, false)}`) : 
        (cTerm.startsWith('-') ? `- ${formatFraction(e, f, false)}` : `+ ${formatFraction(e, f, false)}`);
    leftExpression = `${formatFraction(a, b)}\\left(${cTerm} ${eTerm}\\right)`;
  }

  // Process right side
  let rightExpression = "";
  if (i === 0 && k === 0) {
    rightExpression = "0";
  } else if (i === 0) {
    // Only fraction term k/l
    const [numK, denK] = multiplyFractions([g, h], [k, l]);
    rightExpression = formatFraction(numK, denK);
  } else if (k === 0) {
    // Only x term i/j
    const [numI, denI] = multiplyFractions([g, h], [i, j]);
    rightExpression = `${formatFraction(numI, denI)}x`;
  } else {
    const iTerm = `${formatFraction(i, j)}x`;
    const kTerm = k < 0 ? 
        (iTerm.startsWith('-') ? `+ ${formatFraction(Math.abs(k), l, false)}` : `- ${formatFraction(Math.abs(k), l, false)}`) : 
        (iTerm.startsWith('-') ? `- ${formatFraction(k, l, false)}` : `+ ${formatFraction(k, l, false)}`);
    rightExpression = `${formatFraction(g, h)}\\left(${iTerm} ${kTerm}\\right)`;
  }

  return `${leftExpression} = ${rightExpression}`;
}
    
    function renderEquation() {
      const equationContainer = document.getElementById("equation-container");
      const equation = generateEquation();
      equationContainer.innerHTML = `\\[ ${equation} \\]`;
      MathJax.typesetPromise();
    }

    window.onload = renderEquation;
  </script>
</body>
</html>
